# 📋 사이트 관리 기능 테스트 가이드

## 🚀 실행 완료!

### 서버 실행 상태
- ✅ **백엔드 서버**: `http://localhost:8001` (Python FastAPI)
- ✅ **프론트엔드 서버**: `http://localhost:3000` (Next.js)

## 🧪 테스트 시나리오

### 1️⃣ 사이트 관리 기능 테스트
**URL**: `http://localhost:3000/sites`

**테스트 절차:**
1. 브라우저에서 `http://localhost:3000/sites` 접속
2. "사이트 추가" 버튼 클릭
3. 사이트 정보 입력:
   - **사이트 이름**: "테스트 사이트"
   - **회사명**: "테스트 회사"
   - **부서명**: "개발팀" (선택사항)
   - **URL**: "https://test.com" (선택사항)
   - **설명**: "테스트용 사이트입니다"
4. "저장" 버튼 클릭
5. 생성된 사이트가 목록에 표시되는지 확인

### 2️⃣ 문서 업로드 기능 테스트
**URL**: `http://localhost:3000/documents/upload`

**테스트 절차:**
1. 브라우저에서 `http://localhost:3000/documents/upload` 접속
2. **사이트 선택 select box** 확인:
   - 이전 단계에서 생성한 사이트가 표시되는지 확인
   - "테스트 사이트 (테스트 회사 - 개발팀)" 형태로 표시
3. 사이트 선택 후 텍스트 파일 업로드:
   - 간단한 `.txt` 파일 생성하여 업로드
   - 태그와 설명 입력
4. 업로드 성공 확인

### 3️⃣ 문서 목록 필터링 테스트
**URL**: `http://localhost:3000/documents`

**테스트 절차:**
1. 브라우저에서 `http://localhost:3000/documents` 접속
2. **사이트 필터링** 기능 확인:
   - 우측 상단 필터 영역에서 사이트 선택 드롭다운 확인
   - 생성한 사이트가 표시되는지 확인
3. 사이트별 문서 필터링:
   - 특정 사이트 선택 시 해당 사이트의 문서만 표시
   - "모든 사이트" 선택 시 전체 문서 표시

### 4️⃣ 사이트 관리 고급 기능 테스트
**URL**: `http://localhost:3000/sites`

**테스트 절차:**
1. 사이트 정보 수정:
   - 생성한 사이트의 "수정" 버튼 클릭
   - 회사명, 부서명 등 정보 변경
2. 사이트 상태 토글:
   - 사이트 목록에서 전원 버튼 클릭
   - 사이트 비활성화/활성화 테스트
3. 사이트 삭제:
   - 사이트 삭제 시 관련 문서도 함께 삭제되는지 확인

## 🔍 확인 포인트

### ✅ 사이트 관리
- [x] 사이트 생성 시 회사명, 부서명 입력
- [x] 사이트 목록에서 회사명, 부서명 표시
- [x] 사이트별 문서 수 표시
- [x] 사이트 상태 토글 기능
- [x] 사이트 정보 수정 기능

### ✅ 문서 업로드
- [x] 사이트 선택 드롭다운 표시
- [x] 활성 사이트만 선택 가능
- [x] 사이트 정보 표시: "사이트명 (회사명 - 부서명)"
- [x] 사이트 선택 후 문서 업로드

### ✅ 문서 목록
- [x] 사이트별 문서 필터링
- [x] 파일 타입과 사이트 동시 필터링
- [x] 문서 검색 기능

### ✅ 데이터베이스 연동
- [x] SQLite 데이터베이스 사용
- [x] 사이트-문서 관계 설정
- [x] CASCADE 삭제 기능

## 🛠️ 구현된 주요 기능

### 새로운 API 엔드포인트
```bash
# 사이트 관리
POST   /api/sites/                    # 사이트 생성
GET    /api/sites/                    # 사이트 목록
GET    /api/sites/{id}                # 사이트 상세
PUT    /api/sites/{id}                # 사이트 수정
DELETE /api/sites/{id}                # 사이트 삭제
POST   /api/sites/{id}/toggle-status  # 사이트 상태 토글
GET    /api/sites/for-document        # 문서 등록용 사이트 목록

# 문서 관리
GET    /api/documents/sites           # 문서 업로드용 사이트 목록
POST   /api/documents/upload-file     # 사이트 선택 파일 업로드
```

### 사이트 데이터 구조
```json
{
  "id": "uuid",
  "name": "사이트 이름",
  "company": "회사명",
  "department": "부서명",
  "url": "https://...",
  "description": "설명",
  "is_active": true,
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T00:00:00Z",
  "document_count": 5
}
```

## 🎯 성공 결과

이제 다음과 같은 고도화된 사이트 관리 기능을 사용할 수 있습니다:

1. **체계적인 사이트 관리**: 회사명, 부서명을 포함한 상세한 사이트 정보
2. **문서-사이트 연결**: 문서 업로드 시 사이트 선택 및 연결
3. **효율적인 문서 관리**: 사이트별 문서 필터링 및 검색
4. **데이터베이스 기반**: 안정적인 데이터 저장 및 관리
5. **실시간 업데이트**: 사이트 상태 변경 시 즉시 반영

🚀 **브라우저에서 http://localhost:3000 을 열어 테스트해보세요!** 